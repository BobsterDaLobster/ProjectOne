<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Personal Profile Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #add8e6, #ffd580);
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      text-align: center;
      padding: 1rem;
      background: #87cefa;
      color: white;
    }
    nav {
      text-align: center;
      margin: 1rem;
    }
    nav a {
      margin: 0 10px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }
    section {
      padding: 1rem;
    }
    .calendar-container {
      display: flex;
    }
    .calendar {
      flex: 2;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .calendar div {
      padding: 10px;
      background: white;
      text-align: center;
      border-radius: 4px;
      cursor: pointer;
    }
    .calendar .today {
      background: #ffd580;
      font-weight: bold;
    }
    .calendar-controls {
      margin-bottom: 10px;
      text-align: center;
    }
    .event-panel {
      flex: 1;
      margin-left: 20px;
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .event-panel h3 {
      margin-top: 0;
    }
    .event-panel ul {
      list-style: none;
      padding: 0;
    }
    .event-panel li {
      margin-bottom: 5px;
    }
    .event-panel button {
      margin-left: 10px;
      background: #ff6961;
      color: white;
      border: none;
      padding: 2px 6px;
      border-radius: 4px;
      cursor: pointer;
    }
    canvas {
      background: #eee;
      display: block;
      margin: 0 auto;
      border: 2px solid #333;
      position: relative;
    }
    #scoreboard {
      text-align: center;
      font-size: 18px;
      margin-top: 8px;
      font-weight: bold;
    }
    .news-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    .news-article {
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .secret-button {
      position: fixed;
      bottom: 5px;
      right: 5px;
      width: 15px;
      height: 15px;
      background: transparent;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>My Personal Profile</h1>
  </header>

  <section>
    <h2>My Resume</h2>
    <p>Upload or write your resume content here.</p>
  </section>

  <section>
    <h2>Calendar</h2>
    <div class="calendar-controls">
      <button onclick="prevMonth()">Previous</button>
      <span id="monthYear"></span>
      <button onclick="nextMonth()">Next</button>
    </div>
    <div class="calendar-container">
      <div class="calendar" id="calendar"></div>
      <div class="event-panel">
        <h3 id="selectedDate"></h3>
        <ul id="eventList"></ul>
        <input type="text" id="newEvent" placeholder="New Event" />
        <button onclick="addEvent()">Add</button>
      </div>
    </div>
  </section>

  <section>
    <h2>Sports News (via ESPN)</h2>
    <p><a href="https://www.espn.com" target="_blank">Go to ESPN for latest sports news & highlights</a></p>
  </section>

  <section>
    <h2>Notre Dame Fighting Irish Football</h2>
    <p><a href="https://www.espn.com/college-football/team/_/id/87/notre-dame-fighting-irish" target="_blank">Notre Dame Football on ESPN</a></p>
  </section>

  <section>
    <h2>World News</h2>
    <div id="news" class="news-section"></div>
  </section>

  <section>
    <h2>Mini-Game: Crossy Road Clone</h2>
    <canvas id="gameCanvas" width="400" height="550"></canvas>
    <div id="scoreboard">Score: 0<br>High: 0</div>
  </section>

  <button class="secret-button" onclick="redirectSecret()"></button>

  <script>
    // ===== Calendar Logic =====
    const calendarEl = document.getElementById('calendar');
    const monthYearEl = document.getElementById('monthYear');
    const selectedDateEl = document.getElementById('selectedDate');
    const eventListEl = document.getElementById('eventList');
    const newEventEl = document.getElementById('newEvent');

    let currentDate = new Date();
    let events = JSON.parse(localStorage.getItem('events') || '{}');

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      calendarEl.innerHTML = '';

      monthYearEl.textContent = `${currentDate.toLocaleString('default',{month:'long'})} ${year}`;

      for (let i = 0; i < firstDay; i++) {
        const emptyCell = document.createElement('div');
        calendarEl.appendChild(emptyCell);
      }

      for (let d = 1; d <= daysInMonth; d++) {
        const dayCell = document.createElement('div');
        dayCell.textContent = d;
        const today = new Date();
        if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
          dayCell.classList.add('today');
          loadEvents(new Date(year, month, d));
        }
        dayCell.onclick = () => loadEvents(new Date(year, month, d));
        calendarEl.appendChild(dayCell);
      }
    }

    function loadEvents(date) {
      const key = date.toDateString();
      selectedDateEl.textContent = key;
      eventListEl.innerHTML = '';
      (events[key] || []).forEach((event, i) => {
        const li = document.createElement('li');
        li.textContent = event;
        const delBtn = document.createElement('button');
        delBtn.textContent = 'X';
        delBtn.onclick = () => deleteEvent(key, i);
        li.appendChild(delBtn);
        eventListEl.appendChild(li);
      });
      selectedDateEl.dataset.date = key;
    }

    function addEvent() {
      const key = selectedDateEl.dataset.date;
      if (!key) return;
      if (!events[key]) events[key] = [];
      events[key].push(newEventEl.value);
      newEventEl.value = '';
      localStorage.setItem('events', JSON.stringify(events));
      loadEvents(new Date(key));
    }

    function deleteEvent(key, index) {
      events[key].splice(index, 1);
      localStorage.setItem('events', JSON.stringify(events));
      loadEvents(new Date(key));
    }

    function prevMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    }

    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    }

    renderCalendar();

    // ====== World News Fetch ======
    async function fetchNews() {
      try {
        const res = await fetch("https://newsapi.org/v2/top-headlines?language=en&apiKey=demo");
        const data = await res.json();
        const container = document.getElementById("news");
        container.innerHTML = "";
        data.articles.slice(0,6).forEach(article => {
          const div = document.createElement("div");
          div.className = "news-article";
          div.innerHTML = `
            <h4><a href="${article.url}" target="_blank">${article.title}</a></h4>
            <img src="${article.urlToImage || ''}" alt="" style="max-width:100%">
            <p>${article.description || ''}</p>
          `;
          container.appendChild(div);
        });
      } catch (e) {
        console.error("News fetch error", e);
      }
    }
    fetchNews();
    setInterval(fetchNews, 1800000);

    // ===== Secret Redirect =====
    function redirectSecret() {
      const code = prompt("Enter secret code:");
      if (code === "494849") {
        window.location.href = "https://poki.com";
      }
    }

    // ===== Infinite Crossy Road Game =====
    const canvas = document.getElementById('gameCanvas'), ctx = canvas.getContext('2d');
    const TILE = 20; let lanes=[],player=null,cameraY=0,last=null,score=0,high=+localStorage.getItem('highscore')||0;

    function makeLane(i){
      if(i % 10 === 0) return {type:'safe',items:[]};
      let r=Math.random();
      if(r<0.4){ // 40% chance river
        let sp=(Math.random()*.5+.4)*(Math.random()<.5?1:-1);
        let items=[];for(let j=0;j<3;j++)items.push({x:Math.random()*canvas.width,w:80,speed:sp});
        return {type:'river',items};
      } else if(r<0.75){
        let sp=(Math.random()*.6+.6)*(Math.random()<.5?1:-1);
        let items=[];for(let j=0;j<3;j++)items.push({x:Math.random()*canvas.width,w:40,speed:sp});
        return {type:'road',items};
      } else {
        return {type:'grass',items:[]};
      }
    }
    function ensure(n){while(lanes.length<=n)lanes.push(makeLane(lanes.length))}
    function init(){
      lanes=[];ensure(40);
      player={x:200,y:26*TILE,size:TILE,onLog:false};
      cameraY=Math.max(0,player.y-canvas.height/2);score=0;last=null;
    }
    function move(d){
      if(!player)return;
      if(d==='up')player.y-=TILE;
      if(d==='down')player.y+=TILE;
      if(d==='left')player.x-=TILE;
      if(d==='right')player.x+=TILE;
      player.x=Math.max(0,Math.min(canvas.width-player.size,player.x));
      player.x=Math.round(player.x/TILE)*TILE;
      player.y=Math.round(player.y/TILE)*TILE;
      ensure(Math.floor(player.y/TILE)+30);
    }
    window.onkeydown=e=>{if(e.key.startsWith('Arrow'))move(e.key.replace('Arrow','').toLowerCase());if(e.key==='r')init()};

    function loop(t){
      if(!last)last=t;let dt=t-last;last=t;
      cameraY=player.y-canvas.height/2;if(cameraY<0)cameraY=0;
      let top=Math.floor(cameraY/TILE);ensure(top+40);
      ctx.clearRect(0,0,canvas.width,canvas.height);

      for(let i=top;i<top+40;i++){
        let lane=lanes[i],y=i*TILE-cameraY;
        if(lane.type==='safe'){ctx.fillStyle='#ccffcc';ctx.fillRect(0,y,canvas.width,TILE)}
        if(lane.type==='grass'){ctx.fillStyle='#9be29b';ctx.fillRect(0,y,canvas.width,TILE)}
        if(lane.type==='road'){ctx.fillStyle='#666';ctx.fillRect(0,y,canvas.width,TILE);
          lane.items.forEach(c=>{c.x+=c.speed*dt/16;if(c.x>canvas.width+50)c.x=-80;if(c.x<-80)c.x=canvas.width+50;ctx.fillStyle='#d44';ctx.fillRect(c.x,y,40,TILE-2);if(player.x<c.x+40&&player.x+player.size>c.x&&player.y-cameraY<TILE+y&&player.y-cameraY+TILE>y){if(score>high){high=score;localStorage.setItem('highscore',high)}init();}})}
        if(lane.type==='river'){ctx.fillStyle='#09f';ctx.fillRect(0,y,canvas.width,TILE);
          let onLog=false;lane.items.forEach(l=>{l.x+=l.speed*dt/16;if(l.x>canvas.width+100)l.x=-100;if(l.x<-100)l.x=canvas.width+100;ctx.fillStyle='#964B00';ctx.fillRect(l.x,y,l.w,TILE-2);if(player.x<l.x+l.w&&player.x+player.size>l.x&&player.y-cameraY<TILE+y&&player.y-cameraY+TILE>y){onLog=true;player.x+=l.speed*dt/16}});if(!onLog&&player.y-cameraY<TILE+y&&player.y-cameraY+TILE>y){if(score>high){high=score;localStorage.setItem('highscore',high)}init();}}}
      ctx.fillStyle='#ff0';ctx.fillRect(player.x,player.y-cameraY,player.size,player.size);

      score=Math.max(score,Math.floor(player.y/TILE)-26);
      document.getElementById('scoreboard').innerHTML=`Score: ${score}<br>High: ${high}`;
      requestAnimationFrame(loop);
    }
    init();requestAnimationFrame(loop);
  </script>
</body>
</html>
