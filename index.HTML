<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Personal Profile Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #add8e6, #ffd580);
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      text-align: center;
      padding: 1rem;
      background: #87cefa;
      color: white;
    }
    nav {
      text-align: center;
      margin: 1rem;
    }
    nav a {
      margin: 0 10px;
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }
    section {
      padding: 1rem;
    }
    .calendar-container {
      display: flex;
    }
    .calendar {
      flex: 2;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .calendar div {
      padding: 10px;
      background: white;
      text-align: center;
      border-radius: 4px;
      cursor: pointer;
    }
    .calendar .today {
      background: #ffd580;
      font-weight: bold;
    }
    .calendar-controls {
      margin-bottom: 10px;
      text-align: center;
    }
    .event-panel {
      flex: 1;
      margin-left: 20px;
      background: #fff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .event-panel h3 {
      margin-top: 0;
    }
    .event-panel ul {
      list-style: none;
      padding: 0;
    }
    .event-panel li {
      margin-bottom: 5px;
    }
    .event-panel button {
      margin-left: 10px;
      background: #ff6961;
      color: white;
      border: none;
      padding: 2px 6px;
      border-radius: 4px;
      cursor: pointer;
    }
    canvas {
      background: #eee;
      display: block;
      margin: 0 auto;
      border: 2px solid #333;
      position: relative;
    }
    .news-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    .news-article {
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .secret-button {
      position: fixed;
      bottom: 5px;
      right: 5px;
      width: 15px;
      height: 15px;
      background: transparent;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>My Personal Profile</h1>
  </header>
  <section>
    <h2>My Resume</h2>
    <p>Upload or write your resume content here.</p>
  </section>

  <section>
    <h2>Calendar</h2>
    <div class="calendar-controls">
      <button onclick="prevMonth()">Previous</button>
      <span id="monthYear"></span>
      <button onclick="nextMonth()">Next</button>
    </div>
    <div class="calendar-container">
      <div class="calendar" id="calendar"></div>
      <div class="event-panel">
        <h3 id="selectedDate"></h3>
        <ul id="eventList"></ul>
        <input type="text" id="newEvent" placeholder="New Event" />
        <button onclick="addEvent()">Add</button>
      </div>
    </div>
  </section>

  <section>
    <h2>Sports News (via ESPN)</h2>
    <p><a href="https://www.espn.com" target="_blank">Go to ESPN for latest sports news & highlights</a></p>
  </section>

  <section>
    <h2>Notre Dame Fighting Irish Football</h2>
    <p><a href="https://www.espn.com/college-football/team/_/id/87/notre-dame-fighting-irish" target="_blank">Notre Dame Football on ESPN</a></p>
  </section>

  <section>
    <h2>World News</h2>
    <div id="news" class="news-section"></div>
  </section>

  <section>
    <h2>Mini-Game: Crossy Road Clone</h2>
    <canvas id="gameCanvas" width="400" height="550"></canvas>
  </section>

  <button class="secret-button" onclick="redirectSecret()"></button>

  <script>
    // ===== Calendar Logic =====
    const calendarEl = document.getElementById('calendar');
    const monthYearEl = document.getElementById('monthYear');
    const selectedDateEl = document.getElementById('selectedDate');
    const eventListEl = document.getElementById('eventList');
    const newEventEl = document.getElementById('newEvent');

    let currentDate = new Date();
    let events = JSON.parse(localStorage.getItem('events') || '{}');

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      calendarEl.innerHTML = '';

      monthYearEl.textContent = `${currentDate.toLocaleString('default',{month:'long'})} ${year}`;

      for (let i = 0; i < firstDay; i++) {
        const emptyCell = document.createElement('div');
        calendarEl.appendChild(emptyCell);
      }

      for (let d = 1; d <= daysInMonth; d++) {
        const dayCell = document.createElement('div');
        dayCell.textContent = d;
        const today = new Date();
        if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
          dayCell.classList.add('today');
          loadEvents(new Date(year, month, d));
        }
        dayCell.onclick = () => loadEvents(new Date(year, month, d));
        calendarEl.appendChild(dayCell);
      }
    }

    function loadEvents(date) {
      const key = date.toDateString();
      selectedDateEl.textContent = key;
      eventListEl.innerHTML = '';
      (events[key] || []).forEach((event, i) => {
        const li = document.createElement('li');
        li.textContent = event;
        const delBtn = document.createElement('button');
        delBtn.textContent = 'X';
        delBtn.onclick = () => deleteEvent(key, i);
        li.appendChild(delBtn);
        eventListEl.appendChild(li);
      });
      selectedDateEl.dataset.date = key;
    }

    function addEvent() {
      const key = selectedDateEl.dataset.date;
      if (!key) return;
      if (!events[key]) events[key] = [];
      events[key].push(newEventEl.value);
      newEventEl.value = '';
      localStorage.setItem('events', JSON.stringify(events));
      loadEvents(new Date(key));
    }

    function deleteEvent(key, index) {
      events[key].splice(index, 1);
      localStorage.setItem('events', JSON.stringify(events));
      loadEvents(new Date(key));
    }

    function prevMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    }

    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    }

    renderCalendar();

    // ====== World News Fetch ======
    async function fetchNews() {
      try {
        const res = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https://news.google.com/rss?hl=en-US&gl=US&ceid=US:en");
        const data = await res.json();
        const container = document.getElementById("news");
        container.innerHTML = "";
        data.items.slice(0,6).forEach(article => {
          const div = document.createElement("div");
          div.className = "news-article";
          div.innerHTML = `
            <h4><a href="${article.link}" target="_blank">${article.title}</a></h4>
            ${article.thumbnail ? `<img src="${article.thumbnail}" style="max-width:100%">` : ""}
            <p>${article.description || ""}</p>
          `;
          container.appendChild(div);
        });
      } catch (e) {
        console.error("News fetch error", e);
      }
    }
    fetchNews();
    setInterval(fetchNews, 1800000);

    // ===== Secret Redirect =====
    function redirectSecret() {
      const code = prompt("Enter secret code:");
      if (code === "494849") {
        window.location.href = "https://poki.com";
      }
    }

    // ===== Game Logic (Crossy Road Clone with keypad) =====
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let player, lanes, offsetY, score;

    function resetGame() {
      player = { x: 200, y: 520, size: 20 };
      // snap player to lane grid
      player.x = Math.floor(player.x / 20) * 20;
      player.y = Math.floor(player.y / 20) * 20;

      lanes = [];
      offsetY = 0;
      score = 0;
      generateInitialLanes();
      requestAnimationFrame(gameLoop);
    }

    function generateInitialLanes() {
      for (let i = 0; i < 5; i++) {
        lanes.push({ type: 'grass' }); // initial safe zone 5 lanes
      }
      for (let i = 5; i < 30; i++) {
        generateLane(i);
      }
    }

    function generateLane(index) {
      if (index % 10 === 0) {
        lanes.push({ type: 'grass' });
      } else {
        const rand = Math.floor(Math.random() * 15) + 1;
        if (rand <= 7) lanes.push({ type: 'road', cars: [] });
        else if (rand <= 10) lanes.push({ type: 'river', logs: [] });
        else lanes.push({ type: 'grass' });
      }
    }

    function move(dir) {
      if (dir === 'up') player.y -= 20;
      if (dir === 'down') player.y += 20;
      if (dir === 'left') player.x -= 20;
      if (dir === 'right') player.x += 20;

      // snap to grid
      player.x = Math.floor(player.x / 20) * 20;
      player.y = Math.floor(player.y / 20) * 20;

      if (player.y < 200) {
        offsetY += 20;
        player.y += 20;
        score++;
        if (lanes.length < score/20 + 40) generateLane(lanes.length);
      }
    }

    function gameLoop() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      for (let i = 0; i < lanes.length; i++) {
        const laneY = 550 - (i*20) + offsetY;
        if (laneY < -20 || laneY > 570) continue;

        if (lanes[i].type === 'grass') {
          ctx.fillStyle = '#7cfc00';
          ctx.fillRect(0, laneY, 400, 20);
        } else if (lanes[i].type === 'road') {
          ctx.fillStyle = '#444';
          ctx.fillRect(0, laneY, 400, 20);
          if (Math.random() < 0.01) {
            lanes[i].cars.push({ x: Math.random()<0.5?-40:440, speed: (Math.random()*0.5+0.3)*(Math.random()<0.5?-1:1) });
          }
          lanes[i].cars.forEach(car => {
            ctx.fillStyle = 'red';
            car.x += car.speed;
            ctx.fillRect(car.x, laneY, 40, 20);
            if (player.x < car.x+40 && player.x+20>car.x && player.y < laneY+20 && player.y+20>laneY) resetGame();
          });
        } else if (lanes[i].type === 'river') {
          ctx.fillStyle = '#00f';
          ctx.fillRect(0, laneY, 400, 20);
          if (Math.random() < 0.03) {
            lanes[i].logs.push({ x: Math.random()<0.5?-80:440, speed: (Math.random()*0.5+0.2)*(Math.random()<0.5?-1:1) });
          }
          let onLog = false;
          lanes[i].logs.forEach(log => {
            ctx.fillStyle = 'saddlebrown';
            log.x += log.speed;
            ctx.fillRect(log.x, laneY, 80, 20);
            if (player.x < log.x+80 && player.x+20>log.x && player.y < laneY+20 && player.y+20>laneY) {
              onLog = true;
              player.x += log.speed;
            }
          });
          if (player.y < laneY+20 && player.y+20 > laneY && !onLog) resetGame();
        }
      }

      ctx.fillStyle = 'yellow';
      ctx.fillRect(player.x, player.y, player.size, player.size);
      ctx.fillStyle = 'black';
      ctx.fillText('Score: '+score, 10, 20);

      // Draw keypad inside canvas (fixed size)
      const baseX = canvas.width - 170;
      const baseY = canvas.height - 120;
      const keys = [
        {label:'⬆️', x: baseX+50, y: baseY, w:40, h:30, action:'up'},
        {label:'⬅️', x: baseX, y: baseY+40, w:40, h:30, action:'left'},
        {label:'⬇️', x: baseX+50, y: baseY+40, w:40, h:30, action:'down'},
        {label:'➡️', x: baseX+100, y: baseY+40, w:40, h:30, action:'right'},
        {label:'🔄', x: baseX+50, y: baseY+80, w:40, h:30, action:'restart'}
      ];
      keys.forEach(k => {
        ctx.fillStyle = '#87cefa';
        ctx.fillRect(k.x, k.y, k.w, k.h);
        ctx.fillStyle = 'white';
        ctx.fillText(k.label, k.x+10, k.y+20);
      });

      requestAnimationFrame(gameLoop);
    }

    // Keypad handler with flash effect
    canvas.addEventListener('click', function(evt){
      const rect = canvas.getBoundingClientRect();
      const x = evt.clientX - rect.left;
      const y = evt.clientY - rect.top;

      const baseX = canvas.width - 170;
      const baseY = canvas.height - 120;

      const regions = {
        up:    {x: baseX+50, y: baseY, w:40, h:30, label:'⬆️'},
        left:  {x: baseX, y: baseY+40, w:40, h:30, label:'⬅️'},
        down:  {x: baseX+50, y: baseY+40, w:40, h:30, label:'⬇️'},
        right: {x: baseX+100, y: baseY+40, w:40, h:30, label:'➡️'},
        restart:{x: baseX+50, y: baseY+80, w:40, h:30, label:'🔄'}
      };

      for (const [key, r] of Object.entries(regions)) {
        if (x > r.x && x < r.x + r.w && y > r.y && y < r.y + r.h) {
          // flash
          ctx.fillStyle = '#ffd580';
          ctx.fillRect(r.x, r.y, r.w, r.h);
          ctx.fillStyle = 'white';
          ctx.fillText(r.label, r.x+10, r.y+20);
          setTimeout(() => {
            ctx.fillStyle = '#87cefa';
            ctx.fillRect(r.x, r.y, r.w, r.h);
            ctx.fillStyle = 'white';
            ctx.fillText(r.label, r.x+10, r.y+20);
          }, 150);

          if (key === 'up') move('up');
          if (key === 'down') move('down');
          if (key === 'left') move('left');
          if (key === 'right') move('right');
          if (key === 'restart') resetGame();
        }
      }
    });

    resetGame();
  </script>
</body>
</html>
