<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Personal Profile — Infinite Crossy Road</title>
<style>
  :root{--baby:#add8e6;--peach:#ffd580;--accent:#87cefa;--dark:#333}
  html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(90deg,var(--baby),var(--peach))}
  header{background:var(--accent);color:#fff;padding:14px;text-align:center}
  main{max-width:1100px;margin:14px auto;padding:0 12px}
  section{background:#fff;border-radius:10px;padding:12px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
  h1,h2{margin:6px 0}
  /* calendar */
  .calendar-wrap{display:flex;gap:14px;flex-wrap:wrap}
  .calendar{min-width:320px}
  .calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
  .day{padding:8px;border-radius:6px;text-align:center;cursor:pointer;border:1px solid rgba(0,0,0,.06)}
  .today{background:var(--peach);font-weight:700}
  .events-panel{min-width:260px}
  /* game */
  #gameWrap{position:relative;max-width:760px;margin:0 auto}
  canvas{display:block;width:100%;height:auto;border-radius:6px;background:#eaf8ff;border:3px solid var(--dark)}
  #keypad{position:absolute;right:12px;bottom:12px;display:grid;grid-template-columns:repeat(3,46px);gap:6px;pointer-events:none}
  .kbtn{width:46px;height:42px;border-radius:8px;background:var(--accent);color:#fff;border:none;font-weight:700;cursor:pointer;pointer-events:auto;box-shadow:0 2px 4px rgba(0,0,0,.12)}
  #scoreboard{position:absolute;left:12px;top:12px;background:rgba(255,255,255,0.9);padding:8px;border-radius:6px;font-weight:700}
  /* news */
  .news-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:10px}
  .article{background:#fff;padding:8px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.06)}
  .secret{position:fixed;bottom:6px;right:6px;width:14px;height:14px;opacity:.2;cursor:pointer}
  @media (max-width:820px){ .calendar{width:100%} #gameWrap{max-width:100%} }
</style>
</head>
<body>
<header><h1>My Personal Profile</h1></header>
<main>

  <section>
    <h2>My Resume</h2>
    <p>Paste your resume here (editable later).</p>
  </section>

  <section>
    <h2>Calendar</h2>
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
      <button onclick="prevMonth()">Previous</button>
      <div id="monthYear"></div>
      <button onclick="nextMonth()">Next</button>
    </div>
    <div class="calendar-wrap">
      <div class="calendar">
        <div class="calendar-grid" id="calendarGrid"></div>
      </div>
      <div class="events-panel">
        <h3 id="selectedDate">Select a day</h3>
        <ul id="eventList"></ul>
        <input id="newEventInput" placeholder="New event" style="width:100%;padding:8px;margin-top:8px"/>
        <button style="margin-top:8px" onclick="addEvent()">Add</button>
      </div>
    </div>
  </section>

  <section>
    <h2>Mini-Game: Crossy Road (infinite)</h2>
    <div id="gameWrap">
      <canvas id="gameCanvas" width="760" height="520"></canvas>
      <div id="scoreboard">Score: 0<br>High: 0</div>
      <div id="keypad">
        <button class="kbtn" data-dir="up">⬆</button>
        <button class="kbtn" data-dir="left">⬅</button>
        <button class="kbtn" data-dir="down">⬇</button>
        <button class="kbtn" data-dir="right">➡</button>
        <button class="kbtn" data-dir="reset">⟲</button>
      </div>
    </div>
    <p style="text-align:center;font-size:.95rem;margin-top:8px">Use arrow keys or on-screen keys. Press R to reset.</p>
  </section>

  <section>
    <h2>Sports (ESPN)</h2>
    <p><a href="https://www.espn.com" target="_blank" rel="noopener">Open ESPN for highlights</a></p>
  </section>

  <section>
    <h2>Notre Dame Fighting Irish</h2>
    <p><a href="https://www.espn.com/college-football/team/_/id/87/notre-dame-fighting-irish" target="_blank" rel="noopener">Notre Dame on ESPN</a></p>
  </section>

  <section>
    <h2>World News</h2>
    <div id="newsGrid" class="news-grid"></div>
  </section>

</main>

<div class="secret" id="secretArea" title="Secret"></div>

<script>
/* ---------------- Calendar ---------------- */
const calendarGrid = document.getElementById('calendarGrid');
const monthYearEl = document.getElementById('monthYear');
const selectedDateTitle = document.getElementById('selectedDate');
const eventListEl = document.getElementById('eventList');
const newEventInput = document.getElementById('newEventInput');

let calDate = new Date();
let storedEvents = JSON.parse(localStorage.getItem('profile_events') || '{}');

function renderCalendar(){
  calendarGrid.innerHTML = '';
  const year = calDate.getFullYear(), month = calDate.getMonth();
  monthYearEl.textContent = calDate.toLocaleString('default',{month:'long', year:'numeric'});
  ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d=>{
    const el = document.createElement('div'); el.textContent = d; el.style.fontWeight='700'; calendarGrid.appendChild(el);
  });
  const firstDay = new Date(year,month,1).getDay();
  for(let i=0;i<firstDay;i++) calendarGrid.appendChild(document.createElement('div'));
  const daysInMonth = new Date(year,month+1,0).getDate();
  for(let d=1; d<=daysInMonth; d++){
    const cell = document.createElement('div'); cell.className='day'; cell.textContent=d;
    const today = new Date();
    if(d===today.getDate() && month===today.getMonth() && year===today.getFullYear()){
      cell.classList.add('today'); selectDay(year,month,d);
    }
    cell.onclick = ()=> selectDay(year,month,d);
    calendarGrid.appendChild(cell);
  }
}
function dayKey(y,m,d){ return `${y}-${m}-${d}`; }
function selectDay(y,m,d){
  const k = dayKey(y,m,d);
  selectedDateTitle.textContent = new Date(y,m,d).toDateString();
  eventListEl.innerHTML = '';
  (storedEvents[k]||[]).forEach((ev, idx)=>{
    const li = document.createElement('li'); li.textContent = ev;
    const del = document.createElement('button'); del.textContent = 'X'; del.style.marginLeft='8px';
    del.onclick = ()=> { storedEvents[k].splice(idx,1); localStorage.setItem('profile_events', JSON.stringify(storedEvents)); selectDay(y,m,d); };
    li.appendChild(del); eventListEl.appendChild(li);
  });
  newEventInput.dataset.key = k;
}
function addEvent(){
  const key = newEventInput.dataset.key;
  if(!key) return alert('Pick a date first');
  if(!storedEvents[key]) storedEvents[key] = [];
  const v = newEventInput.value.trim();
  if(!v) return;
  storedEvents[key].push(v);
  localStorage.setItem('profile_events', JSON.stringify(storedEvents));
  const [yy,mm,dd] = key.split('-').map(Number);
  selectDay(yy,mm,dd);
  newEventInput.value = '';
}
function prevMonth(){ calDate.setMonth(calDate.getMonth()-1); renderCalendar(); }
function nextMonth(){ calDate.setMonth(calDate.getMonth()+1); renderCalendar(); }
renderCalendar();

/* ---------------- News ---------------- */
async function fetchTopHeadlines(){
  try{
    const proxy = 'https://api.allorigins.win/get?url=';
    const url = encodeURIComponent('https://news.google.com/rss?hl=en-US&gl=US&ceid=US:en');
    const res = await fetch(proxy + url);
    const j = await res.json();
    const xml = (new DOMParser()).parseFromString(j.contents, 'text/xml');
    const items = xml.querySelectorAll('item');
    const newsGrid = document.getElementById('newsGrid');
    newsGrid.innerHTML = '';
    for(let i=0;i<6 && i<items.length; i++){
      const it = items[i];
      const title = it.querySelector('title')?.textContent || 'No title';
      const link = it.querySelector('link')?.textContent || '#';
      const desc = it.querySelector('description')?.textContent.replace(/<\/?[^>]+(>|$)/g,"") || '';
      const div = document.createElement('div'); div.className='article';
      div.innerHTML = `<h4><a href="${link}" target="_blank" rel="noopener">${title}</a></h4><p>${desc.slice(0,150)}...</p>`;
      newsGrid.appendChild(div);
    }
  }catch(e){console.error(e);}
}
fetchTopHeadlines();
setInterval(fetchTopHeadlines, 30*60*1000);

/* ---------------- Secret redirect ---------------- */
document.getElementById('secretArea').addEventListener('click', ()=>{
  const code = prompt('Enter the secret code:');
  if(code === '494849') window.location.href = 'https://poki.com';
});

/* ---------------- Infinite Crossy Road ---------------- */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let TILE=20, SAFE=10, lanes=[],player,cameraY=0,last,score=0,high=+localStorage.getItem('hi')||0;
function fit(){canvas.width=canvas.clientWidth;canvas.height=canvas.clientHeight}
window.onresize=fit;fit();
function makeLane(i){
  if(i%SAFE===0) return {t:'safe',it:[]};
  let r=Math.random();
  if(r<.4){let sp=(Math.random()*60+30)*(Math.random()<.5?1:-1);
    let it=[];for(let j=0;j<3;j++)it.push({x:Math.random()*canvas.width,w:80,s:sp});
    return {t:'river',it};
  } else if(r<.75){let sp=(Math.random()*80+40)*(Math.random()<.5?1:-1);
    let it=[];for(let j=0;j<3;j++)it.push({x:Math.random()*canvas.width,w:40,s:sp});
    return {t:'road',it};
  } else return {t:'grass',it:[]};
}
function ensure(n){while(lanes.length<=n)lanes.push(makeLane(lanes.length))}
function init(){lanes=[];ensure(50);player={x:Math.floor(canvas.width/2/TILE)*TILE,y:26*TILE,s:TILE};cameraY=0;score=0}
init();
function move(d){if(!player)return;
  if(d==='up')player.y-=TILE;if(d==='down')player.y+=TILE;if(d==='left')player.x-=TILE;if(d==='right')player.x+=TILE;
  player.x=Math.max(0,Math.min(canvas.width-player.s,player.x));
  player.x=Math.round(player.x/TILE)*TILE;player.y=Math.round(player.y/TILE)*TILE;ensure(Math.floor(player.y/TILE)+30)}
document.querySelectorAll('.kbtn').forEach(b=>b.onclick=()=>{let d=b.dataset.dir;if(d==='reset')init();else move(d)});
window.onkeydown=e=>{if(e.key.startsWith('Arrow'))move(e.key.replace('Arrow','').toLowerCase());if(e.key==='r')init()};
function loop(t){if(!last)last=t;let dt=t-last;last=t;cameraY=player.y-canvas.height/2;if(cameraY<0)cameraY=0;
  let top=Math.floor(cameraY/TILE);ensure(top+40);ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=top;i<top+40;i++){let L=lanes[i],y=i*TILE-cameraY;
    if(L.t==='safe'){ctx.fillStyle='#e7ffe8';ctx.fillRect(0,y,canvas.width,TILE)}
    if(L.t==='grass'){ctx.fillStyle='#bff0b0';ctx.fillRect(0,y,canvas.width,TILE)}
    if(L.t==='road'){ctx.fillStyle='#666';ctx.fillRect(0,y,canvas.width,TILE);
      L.it.forEach(c=>{c.x+=c.s*dt/16;if(c.x>canvas.width+50)c.x=-80;if(c.x<-80)c.x=canvas.width+50;
        ctx.fillStyle='#d44';ctx.fillRect(c.x,y,40,TILE-2)})}
    if(L.t==='river'){ctx.fillStyle='#09f';ctx.fillRect(0,y,canvas.width,TILE);
      L.it.forEach(l=>{l.x+=l.s*dt/16;if(l.x>canvas.width+100)l.x=-100;if(l.x<-100)l.x=canvas.width+100;
        ctx.fillStyle='#964B00';ctx.fillRect(l.x,y,l.w,TILE-2)})}}
  let li=Math.floor(player.y/TILE),L=lanes[li],dead=false,onLog=false;
  if(L){if(L.t==='road')for(let c of L.it)if(player.x<c.x+40&&player.x+player.s>c.x)dead=true;
    if(L.t==='river'){for(let l of L.it)if(player.x<l.x+l.w&&player.x+player.s>l.x){onLog=true;player.x+=l.s*dt/16;break}if(!onLog)dead=true}}
  if(dead){if(score>high){high=score;localStorage.setItem('hi',high)}init()}
  ctx.fillStyle='#ff0';ctx.fillRect(player.x,player.y-cameraY,player.s,player.s);
  score=Math.max(score,Math.floor(player.y/TILE)-26);
  document.getElementById('scoreboard').innerHTML=`Score: ${score}<br>High: ${high}`;
  requestAnimationFrame(loop)}
requestAnimationFrame(loop);
</script>
</body>
</html>
